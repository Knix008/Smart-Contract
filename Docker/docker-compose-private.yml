version: "3"

networks:
    privatenet:
        external:
            name: privatenet
services:
    geth01:
        image: geth
        tty: true
        networks:
            - privatenet
        ports:
            - 8545:8545
            - 30305:30305
        container_name: geth01
        command: /bin/bash -c "geth --datadir /home/ethereum init /home/ethereum/genesis.json && geth --datadir /home/ethereum --nodiscover --allow-insecure-unlock --maxpeers 30 --http --http.port 8545 --http.addr '0.0.0.0' --http.corsdomain '*' --http.api 'admin,eth,debug,miner,net,txpool,personal,web3' --port 30305"
        working_dir: /home/ethereum
        
    geth02:
        image: geth
        tty: true
        networks:
            - privatenet
        ports:
            - 8546:8546
            - 30306:30306
        container_name: geth02
        command: /bin/bash -c "geth --datadir /home/ethereum init /home/ethereum/genesis.json && geth --datadir /home/ethereum --nodiscover --allow-insecure-unlock --maxpeers 30 --http --http.port 8546 --http.addr '0.0.0.0' --http.corsdomain '*' --http.api 'admin,eth,debug,miner,net,txpool,personal,web3' --port 30306"
        working_dir: /home/ethereum

    geth03:
        image: geth
        tty: true
        networks:
            - privatenet
        ports:
            - 8547:8547
            - 30307:30307
        container_name: geth03
        command: /bin/bash -c "geth --datadir /home/ethereum init /home/ethereum/genesis.json && geth --datadir /home/ethereum --nodiscover --allow-insecure-unlock --maxpeers 30 --http --http.port 8547 --http.addr '0.0.0.0' --http.corsdomain '*' --http.api 'admin,eth,debug,miner,net,txpool,personal,web3' --port 30307"
        working_dir: /home/ethereum